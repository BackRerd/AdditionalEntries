# Additional Entries - 词条宝石模组

## 模组介绍

Additional Entries 是一个为 Minecraft 1.20.1 设计的 Forge 模组，它为 ClassBioArsenal (CBA) 模组增加了词条宝石系统。该系统允许玩家更便捷地管理武器和护甲上的词条（类似附魔的属性加成）。

## 核心功能

### 词条宝石类型

模组添加了四种词条宝石，每种都有不同的用途：

#### 1. 武器词条宝石（创造）
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **类型**：手动刷新
- **用途**：为近战武器添加随机词条
- **使用方法**：右键点击宝石来随机生成1-3个武器词条

#### 2. 护甲词条宝石（创造）
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **类型**：手动刷新
- **用途**：为护甲添加随机词条
- **使用方法**：右键点击宝石来随机生成1-3个护甲词条

#### 3. 武器词条宝石
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **类型**：自动生成
- **用途**：为近战武器添加随机词条
- **特点**：当宝石进入物品栏时自动生成词条，无需手动刷新

#### 4. 护甲词条宝石
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **类型**：自动生成
- **用途**：为护甲添加随机词条
- **特点**：当宝石进入物品栏时自动生成词条，无需手动刷新

### 词条转移系统

使用铁砧可以将宝石上的词条转移到装备上：

1. **放置装备**：将武器或护甲放在铁砧的左槽位
2. **放置宝石**：将对应类型的词条宝石放在铁砧的右槽位
   - 武器 + 武器词条宝石
   - 护甲 + 护甲词条宝石
3. **获取结果**：从输出槽取出带有新词条的装备
4. **宝石消耗**：转移后词条宝石会被消耗

> **注意**：词条转移会覆盖装备上原有的词条！

### 词条显示

所有词条宝石都会在物品提示（Tooltip）中显示：
- 已存储的词条列表
- 词条名称（本地化）
- 词条等级（罗马数字表示）

例如：
```
§6存储的词条:
§a锋利 V
§a生命提升 III
```

### 重铸系统

模组还提供了两种重铸物品，用于在铁砧中重新随机生成装备的属性。

#### 1. 词条重铸（Entry Reforge）
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **用途**：重新随机生成装备上的词条
- **使用方法**：
  1. 在铁砧左槽放入武器或护甲
  2. 在铁砧右槽放入词条重铸物品
  3. 点击输出槽获取重铸后的装备
- **效果**：装备的词条会被重新随机生成，品质保持不变
- **成功率**：默认 50%（可配置）
- **消耗**：消耗词条重铸物品 + 1级经验

#### 2. 品质重铸（Quality Reforge）
- **获取方式**：创造模式物品栏中的"附加条目"标签页
- **用途**：重新随机生成装备的品质（稀有度）
- **使用方法**：
  1. 在铁砧左槽放入武器或护甲
  2. 在铁砧右槽放入品质重铸物品
  3. 点击输出槽获取重铸后的装备
- **效果**：装备的品质会被重新随机生成，词条保持不变
- **成功率**：默认 50%（可配置）
- **消耗**：消耗品质重铸物品 + 1级经验

> **重要提示**：
> - 重铸有成功率限制，失败时装备保持原样但消耗品仍被消耗
> - 成功率可在配置文件 `config/additionalentries-common.toml` 中调整
> - 词条重铸和品质重铸可以配合使用，打造完美装备

#### 重铸系统与词条宝石的区别

| 特性 | 重铸物品 | 词条宝石 |
|-----|---------|---------|
| 用途 | 重新随机生成已有装备的属性 | 将预设的词条转移到装备上 |
| 控制性 | 完全随机 | 可精确控制词条内容 |
| 成功率 | 50%（可配置） | 100% |
| 修改内容 | 只能修改词条或品质（二选一） | 覆盖所有词条 |
| 保留原属性 | 失败时保留，成功时重新生成 | 直接覆盖 |

### 配置文件

模组提供配置文件用于调整重铸系统的成功率。配置文件位于：
```
config/additionalentries-common.toml
```

可调整选项：
```toml
[重铸设置]
    # 词条重铸的成功率 (0.0 到 1.0)
    entryReforgeSuccessRate = 0.5
    # 品质重铸的成功率 (0.0 到 1.0)
    qualityReforgeSuccessRate = 0.5
```

## 指令系统

模组提供了 `/affixgem` 指令来精确管理宝石上的词条。

### 权限要求

所有指令都需要**操作员权限**（权限等级 2）或启用作弊模式。

### 指令列表

#### 添加词条
```
/affixgem add <词条ID> <等级>
```

**功能**：向手持的词条宝石添加指定词条。

**参数**：
- `<词条ID>`：词条的唯一标识符（支持Tab补全）
- `<等级>`：词条等级（整数，最小值为1）

**示例**：
```
/affixgem add sharpness 5
```
这将添加"锋利 V"到你手持的武器词条宝石上。

**特性**：
- **智能补全**：Tab键会根据你手持的宝石类型只显示对应的词条
  - 手持武器宝石 → 仅显示武器词条
  - 手持护甲宝石 → 仅显示护甲词条
- **本地化反馈**：成功消息会显示词条的中文名称和罗马数字等级

#### 移除词条
```
/affixgem remove <词条ID>
```

**功能**：从手持的词条宝石中移除指定词条。

**参数**：
- `<词条ID>`：要移除的词条标识符（支持Tab补全）

**示例**：
```
/affixgem remove sharpness
```

**错误提示**：
- 如果宝石上没有该词条，会显示"§c宝石上未找到该词条！"

#### 清除所有词条
```
/affixgem clear
```

**功能**：清除手持词条宝石上的所有词条。

**示例**：
```
/affixgem clear
```

**确认消息**：成功后显示"§a已清除所有词条"

### 指令使用注意事项

1. **必须手持宝石**：使用任何 `/affixgem` 指令时，必须在主手持有词条宝石（创造或自动类型均可）
2. **错误提示**：如果未手持宝石，会显示"§c你必须手持词条宝石！"
3. **词条兼容性**：确保添加的词条类型与宝石类型匹配（武器词条配武器宝石，护甲词条配护甲宝石）

## 使用流程示例

### 场景1：为剑添加自定义词条

1. 获取一个**武器词条宝石（创造）**
2. 使用指令添加想要的词条：
   ```
   /affixgem add sharpness 10
   /affixgem add critical_chance 5
   ```
3. 打开铁砧
4. 左槽放入你的剑
5. 右槽放入词条宝石
6. 取出附带词条的剑

### 场景2：快速获取随机词条装备

1. 获取一个**护甲词条宝石**（自动生成类型）
2. 宝石进入物品栏时自动生成随机词条
3. 使用铁砧将词条转移到护甲上

### 场景3：重新刷新词条

1. 手持**武器词条宝石（创造）**
2. 右键点击物品
3. 词条会被重新随机生成（1-3个随机词条）

### 场景4：使用重铸系统打造完美装备

1. 获得一把带有一般词条的武器
2. 使用**词条重铸**尝试获得更好的词条
   - 在铁砧左槽放入武器
   - 右槽放入词条重铸
   - 如果成功，继续下一步；如果失败，继续重铸直到满意
3. 获得满意词条后，使用**品质重铸**提升品质
   - 在铁砧左槽放入武器
   - 右槽放入品质重铸
   - 反复尝试直到获得理想品质

## 技术信息

- **Minecraft 版本**：1.20.1
- **模组加载器**：Forge
- **依赖模组**：ClassBioArsenal (CBA)
- **客户端/服务端**：双端均需安装

## 常见问题

**Q: 为什么我的词条宝石显示"§7右键生成词条"？**  
A: 这是手动刷新类型的宝石初始状态，右键点击即可生成词条。

**Q: 自动生成的宝石可以重新刷新词条吗？**  
A: 自动生成宝石在首次进入物品栏后词条固定，但可以使用 `/affixgem` 指令手动修改。

**Q: 铁砧转移后宝石会保留吗？**  
A: 不会，词条转移后宝石会被消耗。

**Q: 可以给一件装备添加多个宝石的词条吗？**  
A: 不可以，每次转移都会覆盖装备上原有的词条。建议先用指令将所有想要的词条添加到一个宝石上，再进行转移。

**Q: 如何查看可用的词条ID？**  
A: 使用 `/affixgem add ` 然后按Tab键，会根据你手持的宝石类型显示所有可用词条。

**Q: 重铸失败后物品会消失吗？**  
A: 不会，重铸失败时装备会保持原样返回，但消耗的重铸物品不会退还。

**Q: 重铸的成功率可以调整吗？**  
A: 可以，在 `config/additionalentries-common.toml` 文件中调整 `entryReforgeSuccessRate` 和 `qualityReforgeSuccessRate` 的值（0.0到1.0之间）。

**Q: 词条重铸和品质重铸可以同时使用吗？**  
A: 不能同时使用，但可以先用一个再用另一个。建议先重铸词条到满意，再重铸品质。

**Q: 使用词条宝石和重铸系统，哪个更好？**  
A: 各有优势：词条宝石可以精确控制词条内容（使用指令），且100%成功；重铸系统适合已有装备的优化，但是随机的。

## 更新日志

### v1.0.0
- 初始版本
- 添加四种词条宝石
- 实现铁砧词条转移功能
- 添加 `/affixgem` 指令系统
- 支持智能词条补全
- 完整的中英文本地化

---

**开发者**: Backrer  
**项目地址**: [填写你的项目地址]  
**问题反馈**: [填写反馈地址]
